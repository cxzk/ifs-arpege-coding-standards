<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welcome to the IFS coding guidelines! &mdash; IFS_coding_guidelines  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="L1 : implicit none" href="rules/L1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="#" class="icon icon-home"> IFS_coding_guidelines
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">List of rules:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rules/L1.html">L1 : implicit none</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L2.html">L2 : use module, only</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L3.html">L3 : global variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L4.html">L4 : language features</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L5.html">L5 : argument INTENT</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L6.html">L6 : OPTIONAL argument position</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L7.html">L7 : OPTIONAL argument keyword usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L8.html">L8 : copying allocatable arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L9.html">L9 : interfaces for routines</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L10.html">L10 : declaration syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I1.html">I1 : naming of variables, subroutines, modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I2.html">I2 : DRHOOK instrumentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I3.html">I3 : Excessively long interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I4.html">I4 : MPL and message passing</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I5.html">I5 : derived types in modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I6.html">I6 : MPL and string argument</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I7.html">I7 : no TABS</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I8.html">I8 : KIND specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/SC1.html">SC1 : horizontal indexing</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/SC2.html">SC2 : horizontal looping</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/SC3.html">SC3 : function calls from inside KPROMA loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/SC4.html">SC4 : no horizontal indirection</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/S1.html">S1 : END IF / ENDIF</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/S2.html">S2: order of argument declarations</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/S3.html">S3 : line continuation</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/S4.html">S4: no unqualified END statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/S5.html">S5 : unused variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="obsolescent/index.html">Coding norms 2011 rules</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">IFS_coding_guidelines</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Welcome to the IFS coding guidelines!</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="welcome-to-the-ifs-coding-guidelines">
<h1>Welcome to the IFS coding guidelines!<a class="headerlink" href="#welcome-to-the-ifs-coding-guidelines" title="Permalink to this heading"></a></h1>
<p>Developments to the Arpege/IFS codebase should aim to adhere to the guidelines
and rules presented in this document.</p>
<p>Guidelines and rules described here are designed to make code easier to read,
easier to maintain, easier to extend, and less prone to bugs.
Rules are also written so as to allow implementation of automatic checking.</p>
<section id="guidelines-and-recommendations">
<h2>Guidelines and recommendations<a class="headerlink" href="#guidelines-and-recommendations" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Good code should not require large amounts of comments to be intelligible.
Nevertheless targeted explanations of particular segments of interest are desirable.
Each source file should have a homogeneous coding style.</p></li>
<li><p>Routine call signatures or interfaces should be designed with care, respecting library
contouring. Interfaces that are not internal to a component should priviledge</p></li>
<li><p>Naming of new variables, routines and modules should help the reader understand code as efficiently
as possible. <em>Renaming of legacy / existing code?</em></p></li>
<li><p>Contours of a routine or module should be considered with care, avoiding excessive length
or complexity.</p></li>
<li><p>In order to make domain decomposition easier to follow, global variable names are suffixed by G,
while subdomain-local variables are suffixed by L.</p></li>
<li><p>Large arrays should be declared as allocatable, to avoid excessive stack usage.
Small arrays, and in particular those declared in tight code (this should be avoided wherever
possible!) should be automatic, to benefit from faster stack handling.</p></li>
<li><p>If an allocatable variable can be used rather than a pointer, opt for the allocatable for
safety reasons.</p></li>
<li><p>Different meteorological data formats are used at ECMWF and Meteo-France.
The choice between these formats should be based on logical keys LARPEGEF or LARPEGEF_xx
(and not LECMWF).</p></li>
<li><p>Conditional clauses with multiple cases should be handled with SELECT CASE rather than IF
statements followed by multiple ELSEIF statements.</p></li>
<li><p>Aladin routines that are counterparts of IFS/Arpege ones should have the same name but
prefixed with E.
Aladin counterparts to IFS/Arpege SUxxx setup routines should be named SUE.</p></li>
<li><p>Output that should appear in the main text output file should be written to NULOUT.
Output to NULOUT must be deterministic and should not change according to the
parallel distribution or the time at which the job is run.
Error messages should be written to unit NULERR.</p></li>
<li><p>If execution is to be aborted by the code, a call to ABOR1, with a meaningful message,
should be used.</p></li>
</ul>
</section>
<section id="rules-as-checked-by-norms-checker">
<h2>Rules (as checked by norms checker)<a class="headerlink" href="#rules-as-checked-by-norms-checker" title="Permalink to this heading"></a></h2>
<p>Some of the rules relate to the idea of Single Column code, where algorithmic tasks can be expressed
independently of horizontal position, and no horizontal dependencies exist. Code which maps to this
concept can be modified at compile time by tooling (Loki, Fxtran) in line with architecture-specific
requirements. Such tooling relies heavily on code formatting to determine required transformations,
explaining the prescriptive rules for these areas of code.</p>
<p>Rules are organised into general language rules (Lw), IFS-specific rules (Ix), stylistic
points (Sy), and Single-Column related rules (SCz).</p>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">List of rules:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rules/L1.html">L1 : implicit none</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L2.html">L2 : use module, only</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rules/L2.html#exceptions">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rules/L3.html">L3 : global variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L4.html">L4 : language features</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L5.html">L5 : argument INTENT</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L6.html">L6 : OPTIONAL argument position</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L7.html">L7 : OPTIONAL argument keyword usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L8.html">L8 : copying allocatable arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L9.html">L9 : interfaces for routines</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/L10.html">L10 : declaration syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I1.html">I1 : naming of variables, subroutines, modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rules/I1.html#variable-naming">Variable naming</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules/I1.html#routine-naming">Routine naming</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rules/I2.html">I2 : DRHOOK instrumentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I3.html">I3 : Excessively long interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I4.html">I4 : MPL and message passing</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I5.html">I5 : derived types in modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I6.html">I6 : MPL and string argument</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I7.html">I7 : no TABS</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/I8.html">I8 : KIND specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/SC1.html">SC1 : horizontal indexing</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/SC2.html">SC2 : horizontal looping</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/SC3.html">SC3 : function calls from inside KPROMA loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/SC4.html">SC4 : no horizontal indirection</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/S1.html">S1 : END IF / ENDIF</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/S2.html">S2: order of argument declarations</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/S3.html">S3 : line continuation</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/S4.html">S4: no unqualified END statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules/S5.html">S5 : unused variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="obsolescent/index.html">Coding norms 2011 rules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r1.html">R1 : Encapsulation rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r2.html">R2 : Subroutine length</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r3.html">R3 : Cosmetic changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r4.html">R4 :  Unused variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r5.html">R5 :  Variable name suffixes</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r6.html">R6 :  Array syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r7.html">R7 :  Cut-n-paste</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r8.html">R8 :  LECMWF variable</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r9.html">R9 : LELAM variable</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r10.html">R10 :  LFI or GRIB</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r11.html">R11 :  message passing</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r12.html">R12 :  Derived types in a module</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r13.html">R13 :  Code must be threadsafe</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r14.html">R14 :  Abnormal termination</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r15.html">R15 :  The save statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r16.html">R16 : argument passing characteristics</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r17.html">R17 :  SELECT CASE</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r18.html">R18 : include interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r19.html">R19 : number of arguments to routines</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r20.html">R20 : names of variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r21.html">R21 :  Name prefixes and suffixes</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r22.html">R22 : Aladin routine names</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r23.html">R23 :  NULOUT &amp; NULERR usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r24.html">R24 : universal constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r25.html">R25 :  MPL string argument</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r26.html">R26 :  code structure and file location</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r27.html">R27 : namelist usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r28.html">R28 :  DATA statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r29.html">R29 :  F90 free format</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r30.html">R30 :  consistent style</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r31.html">R31 :  no TAB usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r32.html">R32 : IMPLICIT NONE</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r33.html">R33 : no hard-coded array dimensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r34.html">R34 : “::” notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r35.html">R35 : mandatory KIND specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r36.html">R36 :  USE, ONLY</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r37.html">R37 : PARAMETER wherever possible</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r38.html">R38 :  variable name prefixes</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r39.html">R39 :  banned statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r40.html">R40 :  no implicit array sizing</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r41.html">R41 :  automatic and allocatable arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r42.html">R42 : deallocation of allocatables</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r43.html">R43 : comparison operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r44.html">R44 : value comparisons</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r45.html">R45 : argument intents are compulsory</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r46.html">R46 : order of optional arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r47.html">R47 :  ENDIF / END IF</a></li>
<li class="toctree-l2"><a class="reference internal" href="obsolescent/r48.html">R48 :  removal of dead code</a></li>
</ul>
</li>
</ul>
</div>
</section>
</section>
<section id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this heading"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rules/L1.html" class="btn btn-neutral float-right" title="L1 : implicit none" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, ECMWF.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>